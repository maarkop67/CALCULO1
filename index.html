<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Desigualdades Lineales y Cuadráticas</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: Arial; background: #f9f9f9; padding: 20px; }
    input, button { padding: 10px; font-size: 16px; margin-top: 10px; width: 100%; max-width: 500px; }
    #grafica { width: 100%; max-width: 700px; height: 400px; margin-top: 30px; }
    #resultado { margin-top: 20px; background: white; padding: 20px; border-radius: 10px; }
  </style>
</head>
<body>

  <h2>Resolver desigualdades</h2>
  <input type="text" id="desigualdad" placeholder="Ej: x^2 - 4x + 3 <= 0 o 2x + 5 > 3">
  <button onclick="resolver()">Resolver</button>
  <div id="resultado"></div>
  <div id="grafica"></div>

  <script>
    function resolver() {
      const input = document.getElementById("desigualdad").value.replace(/\s/g, "");
      const resultado = document.getElementById("resultado");
      const grafica = document.getElementById("grafica");

      let matchLineal = input.match(/^([+-]?\d*)x([<>]=?|=)([+-]?\d+)$/);
      let matchCuad = input.match(/^([+-]?\d*)x\^2([+-]?\d*)x([+-]?\d*)([<>]=?|=)0$/);

      if (matchLineal) {
        let a = parseFloat(matchLineal[1] || "1");
        let signo = matchLineal[2];
        let b = parseFloat(matchLineal[3]);

        let x = b / a;
        if (a < 0) {
          if (signo.includes(">")) signo = signo.replace(">", "<");
          else if (signo.includes("<")) signo = signo.replace("<", ">");
        }

        resultado.innerHTML = `<h3>Solución: x ${signo} ${Math.abs(x)}</h3>`;

        let x_vals = [];
        let y_vals = [];
        for (let i = -10; i <= 10; i += 0.1) {
          x_vals.push(i);
          y_vals.push(a * i);
        }

        Plotly.newPlot('grafica', [{
          x: x_vals, y: y_vals, type: 'scatter', name: 'f(x)'
        }, {
          x: x_vals, y: Array(x_vals.length).fill(b), type: 'scatter', name: 'Constante'
        }], {
          title: 'Gráfica Lineal',
          xaxis: { title: 'x' },
          yaxis: { title: 'f(x)' }
        });

      } else if (matchCuad) {
        let a = parseFloat(matchCuad[1] || "1");
        let b = parseFloat(matchCuad[2] || "0");
        let c = parseFloat(matchCuad[3] || "0");
        let signo = matchCuad[4];

        const discriminante = b*b - 4*a*c;
        if (discriminante < 0) {
          resultado.innerHTML = `<h3>No hay soluciones reales</h3>`;
        } else {
          const x1 = (-b + Math.sqrt(discriminante)) / (2 * a);
          const x2 = (-b - Math.sqrt(discriminante)) / (2 * a);
          const [min, max] = [x1, x2].sort((x, y) => x - y);

          let intervalo = "";
          if (signo === "<") intervalo = `(${min.toFixed(2)}, ${max.toFixed(2)})`;
          else if (signo === "<=") intervalo = `[${min.toFixed(2)}, ${max.toFixed(2)}]`;
          else if (signo === ">") intervalo = `(-∞, ${min.toFixed(2)}) ∪ (${max.toFixed(2)}, ∞)`;
          else if (signo === ">=") intervalo = `(-∞, ${min.toFixed(2)}] ∪ [${max.toFixed(2)}, ∞)`;
          else intervalo = `x = ${min.toFixed(2)} o x = ${max.toFixed(2)}`;

          resultado.inne
